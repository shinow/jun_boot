{"version":3,"sources":["admin.js"],"names":["mods","layui","element","utils","jquery","$","_","route","tabs","layer","menu","component","kit","elem","loadType","this","version","Admin","config","that","callback","setting","localStorage","undefined","init","type","_private","tabsInit","location","hash","setUrlState","sidebar","render","title","direction","url","width","shade","target","_that","attr","dynamicRender","alert","mockjs","inject","APIs","routeInit","r","name","children","path","iframe","addTab","routeOpts","existsByPath","switchByPath","Date","getTime","setRoutes","href","layid","add","getRoute","id","rendered","icon","menuInit","isJump","onClicked","obj","hasChild","data","method","cached","onChanged","set","isIndex","log","ready","console","exports"],"mappings":";cAAA,IAAIA,KAAO,CACT,UAAW,UAAW,SAAU,SADlC,OAAIA,OACF,QAAW,QAAW,YAAU,OAKhCC,MAAIC,OAAAA,KAAUD,SAAMC,GACVD,MAAME,QADhB,IAAAA,EAEMF,MAAMG,MAFZC,EAGEC,MAAIL,OAHNM,GAIEA,MAAQN,OACRO,MAAOP,OALTO,EAMEC,MAAQR,KANVQ,EAOEC,MAAOT,MAPTS,EAQEC,MAAAA,KARFA,EASQV,MATRU,UASEC,EAAMX,MAAMW,IAKVC,EAAM,WACNC,KAAAA,OAAU,CAFZD,KAAA,OAIAC,SAAA,OAAAC,KAAKC,QAAU,SAIfC,EACEC,UAASC,MAAKD,SADhBE,GAAA,IAGAF,EAHWH,KAGXG,OAIEA,GAAOJ,EADLO,EAAAC,aAA4BR,SACZO,6BACnB,OAAAA,QAAAE,IAAAF,EAAAP,WADCI,EAAOJ,SAAWO,EAAQP,UAGpBF,EAELY,IAFH,CACEC,KAAMP,EAAOJ,WAGfU,OAGAE,EAAIR,UAAAA,GAEH,SAAAA,EAAAJ,UACDY,EAAAC,WAGAD,EAAIE,SAAAV,GAEH,KAAAU,SAAAC,MADC1B,EAAM2B,YAAY,KAAM,MAMxB7B,MAAA8B,QAAAC,OAAA,CACAC,KAAAA,UAEAA,MAAA,YACAC,OAAAA,EAEAC,UAAK,OACLC,eAAc,EAThBD,IAAA,0BASEC,MAAO,QAKPnC,EAAAA,OAAM8B,GAAAA,QAAQC,WAEZ/B,MAAA8B,QAAAC,OAAA,CACAC,KAFMd,KAINc,MAAA,SACAI,OAAA,EAGAD,eAAc,EAThBD,IAAA,wBAFFC,MAAA,UAiBEzB,EAAI2B,GAAAA,oBAAsB,SAAAC,GACxB,IAAAD,EAAAC,EAAA1B,KAAA2B,KAAA,cACA,YAAAvC,GAEEA,MAAA8B,QAAAC,OAAA,CACAC,KAAAA,EAHmBpB,KAKnBoB,MAAA,KACAI,OAAA,EAGAI,eAAA,EATFN,IAAA,uBAcD,SAAAG,GAlBH7B,EAAAiC,MAAA,6BAwBAzC,MAAA0C,OAAAC,OAAAC,MAGC,QAAA3B,EAAAJ,UADCP,EAAMyB,SAIY,mBAAbZ,GAA2BA,KAKhC,IAAAM,EAAW,CACXoB,UAAA,SAAA5B,GACA,IAAAC,EAAAJ,KAeEgC,EAAI,CAEFpC,EAAAA,CAAAA,CACAqC,KAAM,cACNC,UAAW,yBACTC,KAAAA,OACAvC,SAAAA,CAAAA,CACAqC,KAAM,eAHErC,UAIP,yBACDuC,KAAM,QACNvC,CACAqC,KAAM,aAPErC,UAAA,uBANEqC,KAAA,WAkBZrC,OAAAA,CAAAA,CACAqC,KAAM,aACNG,UAAQ,yBAJFH,KAKL,MACDE,QAAM,GACNvC,CACAqC,KAAM,SACNG,UAAQ,wBATFH,KAUL,QACDE,QAAM,GACNvC,CACAqC,KAAM,SACNG,UAAQ,yBAdFH,KAeL,OACDE,QAAM,GACNvC,CACAqC,KAAM,cAlBArC,UAmBL,yBACDuC,KAAM,QACNvC,CACAqC,KAAM,eAtBArC,UAuBL,yBACDuC,KAAM,QACNvC,CACAqC,KAAM,aA1BArC,UA2BL,uBACDuC,KAAM,QACNvC,CACAqC,KAAM,YA9BArC,UA+BL,4BACDuC,KAAM,YACNvC,CACAqC,KAAM,IAlCArC,UAmCL,iBACDuC,KAAM,MACNvC,CACAqC,KAAM,WAtCArC,UAuCL,qBACDuC,KAAM,QACNvC,CACAqC,KAAM,eA1CArC,UA2CL,yBACDuC,KAAM,eACNvC,CACAqC,KAAM,cA9CArC,UA+CL,wBACDuC,KAAM,QACNvC,CACAqC,KAAM,gBAlDArC,UAmDL,0BACDuC,KAAM,MACNvC,CACAqC,KAAM,cAtDArC,UAuDL,wBACDuC,KAAM,MACNvC,CACAqC,KAAM,aA1DArC,UA2DL,uBACDuC,KAAM,UACNvC,CACAqC,KAAM,aA9DArC,UA+DL,uBACDuC,KAAM,OACNvC,CACAqC,KAAM,kBAlEArC,UAmEL,4BACDuC,KAAM,YACNvC,CACAqC,KAAM,eAtEArC,UAuEL,yBACDuC,KAAM,SACNvC,CACAqC,KAAM,eA1EArC,UA2EL,yBACDuC,KAAM,SACNvC,CACAqC,KAAM,kBA9EArC,UA+EL,4BACDuC,KAAM,YACNvC,CACAqC,KAAM,uBAlFArC,UAmFL,iCACDuC,KAAM,iBACNvC,CACAqC,KAAM,cAtFArC,UAuFL,wBACDuC,KAAM,QACNvC,CACAqC,KAAM,eA1FArC,UA2FL,yBACDuC,KAAM,SACNvC,CACAqC,KAAM,iBA9FArC,UA+FL,2BACDuC,KAAM,WACNvC,CACAqC,KAAM,eAlGArC,UAmGL,yBACDuC,KAAM,SACNvC,CACAqC,KAAM,iBAtGArC,UAuGL,2BACDuC,KAAM,WACNvC,CACAqC,KAAM,gBA1GArC,UA2GL,0BACDuC,KAAM,UACNvC,CACAqC,KAAM,kBA9GArC,UA+GL,4BACDuC,KAAM,YACNvC,CACAqC,KAAM,gBAlHArC,UAmHL,0BACDuC,KAAM,UACNvC,CACAqC,KAAM,cAtHArC,UAuHL,wBACDuC,KAAM,QACNvC,CACAqC,KAAM,cA1HArC,UA2HL,wBACDuC,KAAM,QACNvC,CACAqC,KAAM,cA9HArC,UA+HL,wBACDuC,KAAM,QACNvC,CACAqC,KAAM,cAlIArC,UAmIL,0BACDuC,KAAM,SACNvC,CACAqC,KAAM,eAtIArC,UAuIL,2BACDuC,KAAM,SACNvC,CACAqC,KAAM,eA1IArC,UA2IL,2BACDuC,KAAM,SACNvC,CACAqC,KAAM,aA9IArC,UA+IL,yBACDuC,KAAM,QACNvC,CACAqC,KAAM,eAlJArC,UAmJL,mBACDuC,KAAM,eACNvC,CACAqC,KAAM,aAtJArC,UAuJL,iBACDuC,KAAM,cACNvC,CACAqC,KAAM,cA1JArC,UA2JL,kBACDuC,KAAM,eACNvC,CACAqC,KAAM,aA9JArC,UA+JL,iBACDuC,KAAM,aACNvC,CACAqC,KAAM,cAlKArC,UAmKL,kBACDuC,KAAM,cACNvC,CACAqC,KAAM,gBAtKArC,UAuKL,0BACDuC,KAAM,UACNvC,CACAqC,KAAM,iBA1KArC,UA2KL,2BACDuC,KAAM,OACNvC,CACAqC,KAAM,iBA9KArC,UA+KL,2BACDuC,KAAM,OACNvC,CACAqC,KAAM,iBAlLArC,UAAA,2BAhBVqC,KAAA,SAqNFI,MAdM,SAAAlC,EAAAJ,WACAuC,EAAK7C,UAAK8C,WAERnC,EAAKiC,aAAgBvB,SAAMA,MAJ/BrB,EAAA+C,aAAA3B,SAAAC,MAMIV,EAAAiC,OAAAxB,SAAAC,MAAA,IAAA2B,MAAAC,aA7NKlD,EAAAmD,UAAAL,GAsOLtC,MAENqC,OAAA,SAAOO,EAAAC,GACLpD,IAAAA,EAAKqD,EAAIC,SAAAH,GACPI,GACA9B,EAAAA,IAAOc,CACPG,GAAAA,EACAvC,MAAAA,EAAAA,KACAqD,KAAAA,EACAC,UAAMlB,EAAApC,UANRqD,UAAA,EAQDC,KAAA,cAIDC,SAAA,SAAAhD,GACAR,IAAAA,EAASK,KAsBXY,OApBIwC,EAAAA,IAAAA,CACAC,eAAW,EACTD,OAAwB,QAApBjD,EAAOJ,SACTsD,UAAKC,SAAIC,GACP,GAAA,SAAApD,EAAIqD,WACJF,EAAIV,SAAYA,CAChB,IAAIC,EAAAA,EAAQW,KACZpD,EAAAoD,EAAAZ,KACDC,EAAAW,EAAAX,MACFzC,EAAAiC,OAAAO,EAAAC,KAIDzB,KAAAA,YACAqC,OAAAA,CAhBKrC,IAAA,gBAkBPsC,OAAQ,QAEVA,QAAOtD,IA1QIa,SA4QbL,GAEI+C,SAAAA,WACElE,EAAAmE,IAAA,CACAD,UAAA,SAAAd,OAMF5B,OAAQ4C,SAASP,GAEhBA,EAAAO,SAXHrE,EAAAyB,OAAA,WAkBM6C,IAAI5D,GADd6D,MAAA,WACEC,QAAQF,IAAI,qBAIdG,EAAQ,QAAS","file":"admin.js","sourcesContent":["var mods = [\r\n  'element', 'sidebar', 'mockjs', 'select',\r\n  'tabs', 'menu', 'route', 'utils', 'component', 'kit'\r\n];\r\n\r\nlayui.define(mods, function(exports) {\r\n  var element = layui.element,\r\n    utils = layui.utils,\r\n    $ = layui.jquery,\r\n    _ = layui.lodash,\r\n    route = layui.route,\r\n    tabs = layui.tabs,\r\n    layer = layui.layer,\r\n    menu = layui.menu,\r\n    component = layui.component,\r\n    kit = layui.kit;\r\n\r\n\r\n  var Admin = function() {\r\n    this.config = {\r\n      elem: '#app',\r\n      loadType: 'SPA'\r\n    };\r\n    this.version = '1.0.0';\r\n  };\r\n\r\n  Admin.prototype.ready = function(callback) {\r\n    var that = this,\r\n      config = that.config;\r\n\r\n    // 初始化加载方式\r\n    var getItem = utils.localStorage.getItem;\r\n    var setting = getItem(\"KITADMIN_SETTING_LOADTYPE\");\r\n    if (setting !== null && setting.loadType !== undefined) {\r\n      config.loadType = setting.loadType;\r\n    }\r\n\r\n    kit.set({\r\n      type: config.loadType\r\n    }).init();\r\n\r\n    // 初始化路由\r\n    _private.routeInit(config);\r\n    // 初始化选项卡\r\n    if (config.loadType === 'TABS') {\r\n      _private.tabsInit();\r\n    }\r\n    // 初始化左侧菜单   -- 请先初始化选项卡再初始化菜单\r\n    _private.menuInit(config);\r\n    // 跳转至首页\r\n    if (location.hash === '') {\r\n      utils.setUrlState('主页', '#/');\r\n    }\r\n\r\n    // 处理 sidebar\r\n    layui.sidebar.render({\r\n      elem: '#ccleft',\r\n      //content:'', \r\n      title: '这是左侧打开的栗子',\r\n      shade: true,\r\n      // shadeClose:false,\r\n      direction: 'left',\r\n      dynamicRender: true,\r\n      url: 'views/table/teble2.html',\r\n      width: '50%', //可以设置百分比和px\r\n    });\r\n\r\n    $('#cc').on('click', function() {\r\n      var that = this;\r\n      layui.sidebar.render({\r\n        elem: that,\r\n        //content:'', \r\n        title: '这是表单盒子',\r\n        shade: true,\r\n        // shadeClose:false,\r\n        // direction: 'left'\r\n        dynamicRender: true,\r\n        url: 'views/form/index.html',\r\n        width: '50%', //可以设置百分比和px\r\n      });\r\n    });\r\n    // 监听头部右侧 nav\r\n    component.on('nav(header_right)', function(_that) {\r\n      var target = _that.elem.attr('kit-target');\r\n      if (target === 'setting') {\r\n        // 绑定sidebar\r\n        layui.sidebar.render({\r\n          elem: _that.elem,\r\n          //content:'', \r\n          title: '设置',\r\n          shade: true,\r\n          // shadeClose:false,\r\n          // direction: 'left'\r\n          dynamicRender: true,\r\n          url: 'views/setting.html',\r\n          // width: '50%', //可以设置百分比和px\r\n        });\r\n      }\r\n      if (target === 'help') {\r\n        layer.alert('QQ群：248049395，616153456');\r\n      }\r\n    });\r\n\r\n    // 注入mock\r\n    layui.mockjs.inject(APIs);\r\n\r\n    // 初始化渲染\r\n    if (config.loadType === 'SPA') {\r\n      route.render();\r\n    }\r\n\r\n    // 执行回调函数\r\n    typeof callback === 'function' && callback();\r\n  }\r\n\r\n  var _private = {\r\n    routeInit: function(config) {\r\n      var that = this;\r\n      // route.set({\r\n      //   beforeRender: function (route) {\r\n      //     if (!utils.oneOf(route.path, ['/user/table', '/user/table2', '/'])) {\r\n      //       return {\r\n      //         id: new Date().getTime(),\r\n      //         name: 'Unauthorized',\r\n      //         path: '/exception/403',\r\n      //         component: 'views/exception/403.html'\r\n      //       };\r\n      //     }\r\n      //     return route;\r\n      //   }\r\n      // });\r\n      // 配置路由\r\n      var routeOpts = {\r\n        // name: 'kitadmin',\r\n        r: [{\r\n          path: '/user/index',\r\n          component: '/views/user/index.html',\r\n          name: '用户列表',\r\n          children: [{\r\n            path: '/user/create',\r\n            component: 'views/user/create.html',\r\n            name: '新增用户',\r\n          }, {\r\n            path: '/user/edit',\r\n            component: 'views/user/edit.html',\r\n            name: '编辑用户',\r\n          }]\r\n        }],\r\n        routes: [{\r\n          path: '/layui/fly',\r\n          component: 'https://fly.layui.com/',\r\n          name: 'Fly',\r\n          iframe: true\r\n        }, {\r\n          path: '/layui',\r\n          component: 'http://www.layui.com/',\r\n          name: 'Layui',\r\n          iframe: true\r\n        }, {\r\n          path: '/baidu',\r\n          component: 'https://www.baidu.com/',\r\n          name: '百度一下',\r\n          iframe: true\r\n        }, {\r\n          path: '/user/index',\r\n          component: '/views/user/index.html',\r\n          name: '用户列表'\r\n        }, {\r\n          path: '/user/create',\r\n          component: 'views/user/create.html',\r\n          name: '新增用户',\r\n        }, {\r\n          path: '/user/edit',\r\n          component: 'views/user/edit.html',\r\n          name: '编辑用户',\r\n        }, {\r\n          path: '/cascader',\r\n          component: 'views/cascader/index.html',\r\n          name: 'Cascader'\r\n        }, {\r\n          path: '/',\r\n          component: 'views/app.html',\r\n          name: '主页'\r\n        }, {\r\n          path: '/user/my',\r\n          component: 'views/profile.html',\r\n          name: '用户中心'\r\n        }, {\r\n          path: '/inputnumber',\r\n          component: 'views/inputnumber.html',\r\n          name: 'InputNumber'\r\n        }, {\r\n          path: '/layui/grid',\r\n          component: 'views/layui/grid.html',\r\n          name: 'Grid'\r\n        }, {\r\n          path: '/layui/button',\r\n          component: 'views/layui/button.html',\r\n          name: '按钮'\r\n        }, {\r\n          path: '/layui/form',\r\n          component: 'views/layui/form.html',\r\n          name: '表单'\r\n        }, {\r\n          path: '/layui/nav',\r\n          component: 'views/layui/nav.html',\r\n          name: '导航/面包屑'\r\n        }, {\r\n          path: '/layui/tab',\r\n          component: 'views/layui/tab.html',\r\n          name: '选项卡'\r\n        }, {\r\n          path: '/layui/progress',\r\n          component: 'views/layui/progress.html',\r\n          name: 'progress'\r\n        }, {\r\n          path: '/layui/panel',\r\n          component: 'views/layui/panel.html',\r\n          name: 'panel'\r\n        }, {\r\n          path: '/layui/badge',\r\n          component: 'views/layui/badge.html',\r\n          name: 'badge'\r\n        }, {\r\n          path: '/layui/timeline',\r\n          component: 'views/layui/timeline.html',\r\n          name: 'timeline'\r\n        }, {\r\n          path: '/layui/table-element',\r\n          component: 'views/layui/table-element.html',\r\n          name: 'table-element'\r\n        }, {\r\n          path: '/layui/anim',\r\n          component: 'views/layui/anim.html',\r\n          name: 'anim'\r\n        }, {\r\n          path: '/layui/layer',\r\n          component: 'views/layui/layer.html',\r\n          name: 'layer'\r\n        }, {\r\n          path: '/layui/laydate',\r\n          component: 'views/layui/laydate.html',\r\n          name: 'laydate'\r\n        }, {\r\n          path: '/layui/table',\r\n          component: 'views/layui/table.html',\r\n          name: 'table'\r\n        }, {\r\n          path: '/layui/laypage',\r\n          component: 'views/layui/laypage.html',\r\n          name: 'laypage'\r\n        }, {\r\n          path: '/layui/upload',\r\n          component: 'views/layui/upload.html',\r\n          name: 'upload'\r\n        }, {\r\n          path: '/layui/carousel',\r\n          component: 'views/layui/carousel.html',\r\n          name: 'carousel'\r\n        }, {\r\n          path: '/layui/laytpl',\r\n          component: 'views/layui/laytpl.html',\r\n          name: 'laytpl'\r\n        }, {\r\n          path: '/layui/flow',\r\n          component: 'views/layui/flow.html',\r\n          name: 'flow'\r\n        }, {\r\n          path: '/layui/util',\r\n          component: 'views/layui/util.html',\r\n          name: 'util'\r\n        }, {\r\n          path: '/layui/code',\r\n          component: 'views/layui/code.html',\r\n          name: 'code'\r\n        }, {\r\n          path: '/user/table',\r\n          component: '/views/table/teble.html',\r\n          name: 'Table'\r\n        }, {\r\n          path: '/user/table2',\r\n          component: '/views/table/teble2.html',\r\n          name: '数据表格2'\r\n        }, {\r\n          path: '/user/table3',\r\n          component: '/views/table/teble3.html',\r\n          name: '数据表格3'\r\n        }, {\r\n          path: '/user/form',\r\n          component: '/views/form/index.html',\r\n          name: 'Form'\r\n        }, {\r\n          path: '/docs/mockjs',\r\n          component: 'docs/mockjs.html',\r\n          name: '拦截器(Mockjs)'\r\n        }, {\r\n          path: '/docs/menu',\r\n          component: 'docs/menu.html',\r\n          name: '左侧菜单(Menu)'\r\n        }, {\r\n          path: '/docs/route',\r\n          component: 'docs/route.html',\r\n          name: '路由配置(Route)'\r\n        }, {\r\n          path: '/docs/tabs',\r\n          component: 'docs/tabs.html',\r\n          name: '选项卡(Tabs)'\r\n        }, {\r\n          path: '/docs/utils',\r\n          component: 'docs/utils.html',\r\n          name: '工具包(Utils)'\r\n        }, {\r\n          path: '/views/select',\r\n          component: 'views/select/index.html',\r\n          name: 'Select'\r\n        }, {\r\n          path: '/exception/403',\r\n          component: 'views/exception/403.html',\r\n          name: '403'\r\n        }, {\r\n          path: '/exception/404',\r\n          component: 'views/exception/404.html',\r\n          name: '404'\r\n        }, {\r\n          path: '/exception/500',\r\n          component: 'views/exception/500.html',\r\n          name: '500'\r\n        }]\r\n      };\r\n      if (config.loadType === 'TABS') {\r\n        routeOpts.onChanged = function() {\r\n          // 如果当前hash不存在选项卡列表中\r\n          if (!tabs.existsByPath(location.hash)) {\r\n            // 新增一个选项卡\r\n            that.addTab(location.hash, new Date().getTime());\r\n          } else {\r\n            // 切换到已存在的选项卡\r\n            tabs.switchByPath(location.hash);\r\n          }\r\n        }\r\n      }\r\n      // 设置路由\r\n      route.setRoutes(routeOpts);\r\n      return this;\r\n    },\r\n    addTab: function(href, layid) {\r\n      var r = route.getRoute(href);\r\n      if (r) {\r\n        tabs.add({\r\n          id: layid,\r\n          title: r.name,\r\n          path: href,\r\n          component: r.component,\r\n          rendered: false,\r\n          icon: '&#xe62e;'\r\n        });\r\n      }\r\n    },\r\n    menuInit: function(config) {\r\n      var that = this;\r\n      // 配置menu\r\n      menu.set({\r\n        dynamicRender: false,\r\n        isJump: config.loadType === 'SPA',\r\n        onClicked: function(obj) {\r\n          if (config.loadType === 'TABS') {\r\n            if (!obj.hasChild) {\r\n              var data = obj.data;\r\n              var href = data.href;\r\n              var layid = data.layid;\r\n              that.addTab(href, layid);\r\n            }\r\n          }\r\n        },\r\n        elem: '#menu-box',\r\n        remote: {\r\n          url: '/api/getmenus',\r\n          method: 'post'\r\n        },\r\n        cached: false\r\n      }).render();\r\n      return that;\r\n    },\r\n    tabsInit: function() {\r\n      tabs.set({\r\n        onChanged: function(layid) {\r\n          // var tab = tabs.get(layid);\r\n          // if (tab !== null) {\r\n          //   utils.setUrlState(tab.title, tab.path);\r\n          // }\r\n        }\r\n      }).render(function(obj) {\r\n        // 如果只有首页的选项卡\r\n        if (obj.isIndex) {\r\n          route.render('#/');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  var admin = new Admin();\r\n  admin.ready(function() {\r\n    console.log('Init successed.');\r\n  });\r\n\r\n  //输出admin接口\r\n  exports('admin', {});\r\n});"]}